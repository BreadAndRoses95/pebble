addons:
  apt:
    packages:
      - libxml2-utils

env:
  global:
    - secure: "JAN9rRQz2ZLWj1Fxtf8A4qNQwOAga3Nektt+QINicvpD5eDQluVkISKc+oCGmmz9Ie3+7t1FUILlBgM8sfqCq/eZd1RvlQg1n0ka7BegZqWcdrcNztbe+6mGWxEXGygNjtBhX3I1mUcDfjnPiPybZKMwoaUbmQZfJ4syDeREvSI="
    - secure: "VoNjWPtNa3xVy4oZ4xUlAa5eTDGYNcB7otPzx1V8sfFYeePK8jkMuLm4IGJtKNFrKHSqmEAEZ8jHp6eOJdcAwl3TwIMXPBG63R5L5kVNlKPJ+TppH74SuteIrEXmu94r6PSebhMLQkI+26S2QtukqlLSBbAYm591CUvugThs+MI="

language: java
jdk:
    - openjdk7
    - oraclejdk8

after_success:
  - export VERSION=$(echo "cat //*[local-name()='project']/*[local-name()='version']/text()" | xmllint --nocdata --shell pom.xml | sed '1d;$d')
  - 'if [ "$TRAVIS_BRANCH" = "master" ] && [ "$TRAVIS_PULL_REQUEST" = "false" ] && [[ "$VERSION" =~ \-SNAPSHOT$ ]]; then mvn deploy --settings travis-settings.xml -DskipTests=true -B; fi'